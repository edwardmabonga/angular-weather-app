{"version":3,"file":"ng-web-apis-geolocation.js.map","sources":["ng://@ng-web-apis/geolocation/tokens/geolocation.ts","ng://@ng-web-apis/geolocation/tokens/geolocation-options.ts","ng://@ng-web-apis/geolocation/tokens/geolocation-support.ts","ng://@ng-web-apis/geolocation/services/geolocation.service.ts"],"sourcesContent":["import {inject, InjectionToken} from '@angular/core';\nimport {NAVIGATOR} from '@ng-web-apis/common';\n\nexport const GEOLOCATION = new InjectionToken<Geolocation>(\n    'An abstract over window.navigator.geolocation object',\n    {\n        factory: () => inject(NAVIGATOR).geolocation,\n    },\n);\n","import {InjectionToken} from '@angular/core';\n\nexport const POSITION_OPTIONS = new InjectionToken<PositionOptions>(\n    'Token for an additional position options',\n    {factory: () => ({})},\n);\n","import {inject, InjectionToken} from '@angular/core';\nimport {WINDOW} from '@ng-web-apis/common';\n\nexport const GEOLOCATION_SUPPORT = new InjectionToken<boolean>(\n    'Is Geolocation Api supported?',\n    {\n        factory: () => {\n            const window = inject(WINDOW);\n\n            return !!window.navigator && !!window.navigator.geolocation;\n        },\n    },\n);\n","import {Inject, Injectable} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {finalize, shareReplay} from 'rxjs/operators';\nimport {GEOLOCATION} from '../tokens/geolocation';\nimport {POSITION_OPTIONS} from '../tokens/geolocation-options';\nimport {GEOLOCATION_SUPPORT} from '../tokens/geolocation-support';\n\n// @dynamic\n@Injectable({\n    providedIn: 'root',\n})\nexport class GeolocationService extends Observable<Position> {\n    constructor(\n        @Inject(GEOLOCATION) geolocationRef: Geolocation,\n        @Inject(GEOLOCATION_SUPPORT) geolocationSupported: boolean,\n        @Inject(POSITION_OPTIONS)\n        positionOptions: PositionOptions,\n    ) {\n        let watchPositionId = 0;\n\n        super(subscriber => {\n            if (!geolocationSupported) {\n                subscriber.error('Geolocation is not supported in your browser');\n            }\n\n            watchPositionId = geolocationRef.watchPosition(\n                position => subscriber.next(position),\n                positionError => subscriber.error(positionError),\n                positionOptions,\n            );\n        });\n\n        return this.pipe(\n            finalize(() => geolocationRef.clearWatch(watchPositionId)),\n            shareReplay({bufferSize: 1, refCount: true}),\n        ) as GeolocationService;\n    }\n}\n"],"names":["tslib_1.__extends"],"mappings":";;;;;;;;;;AAAA;AAGA,IAAa,WAAW,GAAG,IAAI,cAAc,CACzC,sDAAsD,EACtD;IACI,OAAO,EAAE,cAAM,OAAA,MAAM,CAAC,SAAS,CAAC,CAAC,WAAW,GAAA;CAC/C,CACJ;;;;;;ACRD;AAEA,IAAa,gBAAgB,GAAG,IAAI,cAAc,CAC9C,0CAA0C,EAC1C,EAAC,OAAO,EAAE,cAAM,QAAC,EAAE,IAAC,EAAC,CACxB;;;;;;ACLD;AAGA,IAAa,mBAAmB,GAAG,IAAI,cAAc,CACjD,+BAA+B,EAC/B;IACI,OAAO,EAAE;;YACC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;QAE7B,OAAO,CAAC,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC;KAC/D;CACJ,CACJ;;;;;;;ACJD;IAGwCA,sCAAoB;IACxD,4BACyB,cAA2B,EACnB,oBAA6B,EAE1D,eAAgC;QAJpC,iBAwBC;;YAlBO,eAAe,GAAG,CAAC;QAEvB,QAAA,kBAAM,UAAA,UAAU;YACZ,IAAI,CAAC,oBAAoB,EAAE;gBACvB,UAAU,CAAC,KAAK,CAAC,8CAA8C,CAAC,CAAC;aACpE;YAED,eAAe,GAAG,cAAc,CAAC,aAAa,CAC1C,UAAA,QAAQ,IAAI,OAAA,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAA,EACrC,UAAA,aAAa,IAAI,OAAA,UAAU,CAAC,KAAK,CAAC,aAAa,CAAC,GAAA,EAChD,eAAe,CAClB,CAAC;SACL,CAAC,SAAC;QAEH,0BAAO,KAAI,CAAC,IAAI,CACZ,QAAQ,CAAC,cAAM,OAAA,cAAc,CAAC,UAAU,CAAC,eAAe,CAAC,GAAA,CAAC,EAC1D,WAAW,CAAC,EAAC,UAAU,EAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC,CAC/C,GAAuB;KAC3B;;gBA5BJ,UAAU,SAAC;oBACR,UAAU,EAAE,MAAM;iBACrB;;;;gDAGQ,MAAM,SAAC,WAAW;8CAClB,MAAM,SAAC,mBAAmB;gDAC1B,MAAM,SAAC,gBAAgB;;;6BAfhC;CAqCC,CA1BuC,UAAU;;;;;;;;;;;;;;"}
