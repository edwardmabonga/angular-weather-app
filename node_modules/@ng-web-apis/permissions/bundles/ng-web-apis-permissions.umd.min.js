!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@ng-web-apis/common")):"function"==typeof define&&define.amd?define("@ng-web-apis/permissions",["exports","@angular/core","rxjs","rxjs/operators","@ng-web-apis/common"],r):r(((e=e||self)["ng-web-apis"]=e["ng-web-apis"]||{},e["ng-web-apis"].permissions={}),e.ng.core,e.rxjs,e.rxjs.operators,e.common)}(this,(function(e,r,n,o,t){"use strict";var s=new r.InjectionToken("An abstraction over window.navigator.permissions object",{factory:function(){return r.inject(t.NAVIGATOR).permissions}}),i=new r.InjectionToken("Is Permissions API supported?",{factory:function(){return!!r.inject(s)}}),p=function(){function e(e,r){this.permissions=e,this.permissionsSupported=r}return e.prototype.state=function(e){var r=this,t="string"==typeof e?{name:e}:e;return new n.Observable((function(e){if(r.permissionsSupported)return n.from(r.permissions.query(t)).pipe(o.switchMap((function(e){return n.fromEvent(e,"change").pipe(o.startWith(null),o.map((function(){return e.state})))}))).subscribe(e);e.error("Permissions is not supported in your browser")})).pipe(o.shareReplay({bufferSize:1,refCount:!0}))},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:Permissions,decorators:[{type:r.Inject,args:[s]}]},{type:Boolean,decorators:[{type:r.Inject,args:[i]}]}]},e.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new e(r.ɵɵinject(s),r.ɵɵinject(i))},token:e,providedIn:"root"}),e}();e.PERMISSIONS=s,e.PERMISSIONS_SUPPORT=i,e.PermissionsService=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-web-apis-permissions.umd.min.js.map